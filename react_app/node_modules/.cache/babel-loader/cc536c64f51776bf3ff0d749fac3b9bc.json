{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\klodv\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\react-p\\\\ReactDRF\\\\react_app\\\\src\\\\pages\\\\RestAPI.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useRef } from 'react'; // import './RestAPI.css';\n\nimport axios from 'axios'; // fetch 보단 axios를 사용하자\n\nimport Cropper from 'react-cropper';\nimport 'cropperjs/dist/cropper.css'; // react-image-crop 별로임 canvas를 써야되는데 코드도 길고 레퍼런스가 너무 옛날꺼임\n\nimport { FileUploader } from \"react-drag-drop-files\";\nimport \"../styles/style.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction RestAPI() {\n  _s();\n\n  const [text, setText] = useState('test');\n  const [Img, setImg] = useState('');\n  const [title, setTitle] = useState(\"\");\n  const [image, setImage] = useState('');\n  const cropperRef = useRef(null); // 유저가 첨부한 이미지\n\n  const [inputImage, setInputImage] = useState(null); // 유저가 선택한 영역만큼 크롭된 이미지\n\n  const [croppedImage, setCroppedImage] = useState(null);\n\n  const onCrop = () => {\n    const imageElement = cropperRef === null || cropperRef === void 0 ? void 0 : cropperRef.current;\n    const cropper = imageElement === null || imageElement === void 0 ? void 0 : imageElement.cropper;\n    setCroppedImage(cropper.getCroppedCanvas().toDataURL());\n  };\n\n  const dataURLtoFile = () => {\n    let dataurl = {\n      croppedImage\n    }['croppedImage']; // console.log(dataurl)\n\n    var arr = dataurl.split(','),\n        mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]),\n        n = bstr.length,\n        u8arr = new Uint8Array(n);\n\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n\n    var file = new File([u8arr], 'base64_to_img.jpg', {\n      type: mime\n    });\n    console.log(file); // console.log(typeof(file))\n    // console.log(file.name)\n    // console.log(typeof(file.name))\n\n    const fd = new FormData();\n    fd.append('image', file);\n    fd.append('title', file.name);\n    axios.post('http://127.0.0.1:8000/api/image/', fd, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(function (response) {\n      console.log(response);\n      response['status'] === 200 || 201 ? console.log('ITS 200 OR 201') : console.log('ITS not working!');\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const fileTypes = [\"JPEG\", \"PNG\", \"GIF\", \"JPG\"];\n  const [file, setFile] = useState(null);\n\n  const handleChange = file => {\n    //   const handleChange = (e) => {\n    setFile(URL.createObjectURL(file[0])); // setFile(URL.createObjectURL(e.target.files[0]));\n\n    console.log(file[0]);\n    console.log(typeof file);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrap\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"topBtn\",\n      children: \"TOP\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uC790\\uB974\\uACE0 \\uC2F6\\uC740 \\uC601\\uC5ED\\uC744 \\uC120\\uD0DD\\uD574 \\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FileUploader, {\n          multiple: true,\n          handleChange: handleChange // handleChange={(e)=>{setFile(URL.createObjectURL(e.target.files[0]))}}\n          ,\n          name: \"file\",\n          types: fileTypes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: file && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Cropper, {\n              src: file // crop={onCrop}\n              ,\n              ref: cropperRef,\n              style: {\n                height: 400,\n                width: \"100%\"\n              },\n              initialAspectRatio: 16 / 9\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log(typeof {\n                  croppedImage\n                }['croppedImage']);\n              },\n              children: \"CROP LOG type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log({\n                  croppedImage\n                });\n              },\n              children: \"CROP LOG\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onCrop,\n              children: \"CROP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), croppedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: croppedImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: dataURLtoFile,\n          children: \"base64Image to imagefile POST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n\n_s(RestAPI, \"3m4Bu9nNR504FBNRz0yVBpqOvqo=\");\n\n_c = RestAPI;\nexport default RestAPI;\n\nvar _c;\n\n$RefreshReg$(_c, \"RestAPI\");","map":{"version":3,"names":["React","useState","useRef","axios","Cropper","FileUploader","RestAPI","text","setText","Img","setImg","title","setTitle","image","setImage","cropperRef","inputImage","setInputImage","croppedImage","setCroppedImage","onCrop","imageElement","current","cropper","getCroppedCanvas","toDataURL","dataURLtoFile","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","file","File","type","console","log","fd","FormData","append","name","post","headers","then","response","catch","error","fileTypes","setFile","handleChange","URL","createObjectURL","height","width"],"sources":["C:/Users/klodv/OneDrive/바탕 화면/react-p/ReactDRF/react_app/src/pages/RestAPI.js"],"sourcesContent":["/* eslint-disable */\r\n\r\nimport React, { useState, useRef} from 'react';\r\n// import './RestAPI.css';\r\nimport axios from 'axios'; // fetch 보단 axios를 사용하자\r\nimport Cropper from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css'; // react-image-crop 별로임 canvas를 써야되는데 코드도 길고 레퍼런스가 너무 옛날꺼임\r\nimport { FileUploader } from \"react-drag-drop-files\";\r\nimport \"../styles/style.scss\"\r\n\r\nfunction RestAPI() {\r\n    const [text, setText] = useState('test');\r\n    const [Img, setImg] = useState('');\r\n\r\n    const [title , setTitle] = useState(\"\");\r\n    const [image , setImage] = useState('');\r\n    \r\n    const cropperRef = useRef(null);\r\n    // 유저가 첨부한 이미지\r\n    const [inputImage, setInputImage] = useState(null);\r\n    // 유저가 선택한 영역만큼 크롭된 이미지\r\n    const [croppedImage, setCroppedImage] = useState(null);\r\n\r\n    const onCrop = () => {\r\n        const imageElement = cropperRef?.current;\r\n        const cropper = imageElement?.cropper;\r\n        setCroppedImage(cropper.getCroppedCanvas().toDataURL());\r\n    };  \r\n\r\n    const dataURLtoFile = () => {\r\n        let dataurl = {croppedImage}['croppedImage']\r\n        // console.log(dataurl)\r\n        var arr = dataurl.split(','),\r\n            mime = arr[0].match(/:(.*?);/)[1],\r\n            bstr = atob(arr[1]), \r\n            n = bstr.length, \r\n            u8arr = new Uint8Array(n);\r\n            \r\n        while(n--){\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        \r\n        var file = new File([u8arr], 'base64_to_img.jpg', {type:mime});\r\n        console.log(file)\r\n        // console.log(typeof(file))\r\n        // console.log(file.name)\r\n        // console.log(typeof(file.name))\r\n        const fd = new FormData();\r\n        fd.append('image', file);\r\n        fd.append('title', file.name);\r\n        axios\r\n        .post('http://127.0.0.1:8000/api/image/', fd, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n        .then(function(response){\r\n            console.log(response);\r\n            response['status'] === 200 || 201 ? console.log('ITS 200 OR 201') : console.log('ITS not working!')\r\n            \r\n        })\r\n        .catch(function(error){\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    const fileTypes = [\"JPEG\", \"PNG\", \"GIF\",\"JPG\"];\r\n\r\n\r\n      const [file, setFile] = useState(null);\r\n      const handleChange = (file) => {\r\n    //   const handleChange = (e) => {\r\n        setFile(URL.createObjectURL(file[0]));\r\n        // setFile(URL.createObjectURL(e.target.files[0]));\r\n        console.log(file[0])\r\n        console.log(typeof(file))\r\n\r\n      };\r\n      \r\n    \r\n\r\n    return (\r\n        <div className='wrap'>\r\n            <button className='topBtn'>TOP</button>\r\n            <div>\r\n            <div className=\"App\">\r\n          <h1>자르고 싶은 영역을 선택해 주세요.</h1>\r\n          <FileUploader\r\n            multiple={true}\r\n            handleChange={handleChange}\r\n            // handleChange={(e)=>{setFile(URL.createObjectURL(e.target.files[0]))}}\r\n            name=\"file\"\r\n            types={fileTypes}\r\n          />\r\n\r\n          <div>{file && (\r\n                    <div>\r\n                        <Cropper\r\n                            src={file}\r\n                            // crop={onCrop}\r\n                            ref={cropperRef}\r\n                            style={{ height: 400, width: \"100%\" }}\r\n                            initialAspectRatio={16 / 9}\r\n                        />\r\n                        \r\n                        <button onClick={()=>{console.log(typeof({croppedImage}['croppedImage']))}}>CROP LOG type</button>\r\n                        <button onClick={()=>{console.log({croppedImage})}}>CROP LOG</button>\r\n                        <button onClick={onCrop}>CROP</button>\r\n                        \r\n                    </div>\r\n                )}</div>\r\n        </div>\r\n\r\n                            \r\n                {croppedImage && (\r\n                    <div>\r\n                        <img src={croppedImage} />\r\n                        <button onClick={dataURLtoFile}>base64Image to imagefile POST</button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n        </div>\r\n      );\r\n}\r\n\r\nexport default RestAPI;"],"mappings":"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"},"metadata":{},"sourceType":"module"}