{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/klodv/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/react-p/ReactDRF/react_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/klodv/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/react-p/ReactDRF/react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/klodv/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/react-p/ReactDRF/react_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ImageList(){var _useState=useState([{id:null,image:null,title:null}]),_useState2=_slicedToArray(_useState,2),imgList=_useState2[0],setImgListData=_useState2[1];// useEffect(async() => { //uesEffect 에서 async로 axios 사용 시 error 발생\nuseEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,_imgList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('Img List ON screen');_context.prev=1;_context.next=4;return axios.get('http://127.0.0.1:8000/image');case 4:res=_context.sent;console.log(res.data['results']);_context.next=8;return res.data['results'].map(function(rowData){return{id:rowData.id,title:rowData.title,image:rowData.image};});case 8:_imgList=_context.sent;// setImgListData(..._imgList);\nsetImgListData(imgList.concat(_imgList));_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){console.log(imgList);},children:\"Get\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Image List\"}),imgList.filter(function(data){return data.id!==null;}).map(function(data){return/*#__PURE__*/_jsxs(\"div\",{className:\"imageList\",children:[/*#__PURE__*/_jsx(\"h3\",{children:data.id}),/*#__PURE__*/_jsx(\"h3\",{children:data.title}),/*#__PURE__*/_jsx(\"img\",{src:data.image,width:\"600\",height:\"400\"}),/*#__PURE__*/_jsx(\"hr\",{})]},data.id);})]})});}export default ImageList;","map":{"version":3,"names":["axios","React","useState","useEffect","ImageList","id","image","title","imgList","setImgListData","fetchData","console","log","get","res","data","map","rowData","_imgList","concat","error","message","filter"],"sources":["C:/Users/klodv/OneDrive/바탕 화면/react-p/ReactDRF/react_app/src/pages/ImageList.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState, useEffect } from 'react'\r\n\r\nfunction ImageList() {\r\n    const [imgList, setImgListData] = useState([{\r\n        id: null,\r\n        image: null,\r\n        title: null,\r\n    }])\r\n    \r\n    // useEffect(async() => { //uesEffect 에서 async로 axios 사용 시 error 발생\r\n    useEffect(() => {\r\n        async function fetchData(){\r\n            console.log('Img List ON screen');\r\n            try{\r\n                const res = await axios.get('http://127.0.0.1:8000/image')\r\n                console.log(res.data['results'])\r\n                const _imgList = await res.data['results'].map((rowData) => ({\r\n                    id: rowData.id,\r\n                    title: rowData.title,\r\n                    image: rowData.image\r\n                    })\r\n                )\r\n                // setImgListData(..._imgList);\r\n                setImgListData(imgList.concat(_imgList));\r\n            } catch(e){\r\n                console.error(e.message)\r\n            }\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n  return (\r\n    <>\r\n        <div className='list'>\r\n            <button onClick={()=>{console.log(imgList)}}>Get</button>\r\n            <h1>Image List</h1>\r\n            {imgList.filter(data => data.id !== null).map((data)=>{\r\n                return (\r\n                    <div className='imageList' key={data.id}>\r\n                        <h3>{data.id}</h3>\r\n                        <h3>{data.title}</h3>\r\n                        <img src={data.image} width='600' height='400'/>\r\n                        <hr/>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ImageList"],"mappings":"sfAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,6IAEA,QAASC,UAAT,EAAqB,CACjB,cAAkCF,QAAQ,CAAC,CAAC,CACxCG,EAAE,CAAE,IADoC,CAExCC,KAAK,CAAE,IAFiC,CAGxCC,KAAK,CAAE,IAHiC,CAAD,CAAD,CAA1C,wCAAOC,OAAP,eAAgBC,cAAhB,eAMA;AACAN,SAAS,CAAC,UAAM,SACGO,UADH,uIACZ,sJACIC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EADJ,sCAG0BZ,MAAK,CAACa,GAAN,CAAU,6BAAV,CAH1B,QAGcC,GAHd,eAIQH,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACC,IAAJ,CAAS,SAAT,CAAZ,EAJR,sBAK+BD,IAAG,CAACC,IAAJ,CAAS,SAAT,EAAoBC,GAApB,CAAwB,SAACC,OAAD,QAAc,CACzDZ,EAAE,CAAEY,OAAO,CAACZ,EAD6C,CAEzDE,KAAK,CAAEU,OAAO,CAACV,KAF0C,CAGzDD,KAAK,CAAEW,OAAO,CAACX,KAH0C,CAAd,EAAxB,CAL/B,QAKcY,QALd,eAWQ;AACAT,cAAc,CAACD,OAAO,CAACW,MAAR,CAAeD,QAAf,CAAD,CAAd,CAZR,iFAcQP,OAAO,CAACS,KAAR,CAAc,YAAEC,OAAhB,EAdR,qEADY,4CAkBZX,SAAS,GACZ,CAnBQ,CAmBN,EAnBM,CAAT,CAqBF,mBACE,sCACI,aAAK,SAAS,CAAC,MAAf,wBACI,eAAQ,OAAO,CAAE,kBAAI,CAACC,OAAO,CAACC,GAAR,CAAYJ,OAAZ,EAAqB,CAA3C,iBADJ,cAEI,kCAFJ,CAGKA,OAAO,CAACc,MAAR,CAAe,SAAAP,IAAI,QAAIA,KAAI,CAACV,EAAL,GAAY,IAAhB,EAAnB,EAAyCW,GAAzC,CAA6C,SAACD,IAAD,CAAQ,CAClD,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,oBAAKA,IAAI,CAACV,EAAV,EADJ,cAEI,oBAAKU,IAAI,CAACR,KAAV,EAFJ,cAGI,YAAK,GAAG,CAAEQ,IAAI,CAACT,KAAf,CAAsB,KAAK,CAAC,KAA5B,CAAkC,MAAM,CAAC,KAAzC,EAHJ,cAII,aAJJ,GAAgCS,IAAI,CAACV,EAArC,CADJ,CAQH,CATA,CAHL,GADJ,EADF,CAkBD,CAED,cAAeD,UAAf"},"metadata":{},"sourceType":"module"}